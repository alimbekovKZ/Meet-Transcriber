# План реализации плагина для транскрибации звонков в Google Meet

## Этап 1: Подготовка проекта
### 1.1. Инициализация проекта  
Создай структуру проекта плагина для Chrome:
```markdown
- `manifest.json` с нужными разрешениями.
- Папку `src` с файлами:
  - `content.js`
  - `background.js`
  - `popup.js`
  - `popup.html`
  - `options.html`
  - `styles.css`
- Настроить `package.json` (если используем npm).
- Добавить README с кратким описанием.
```

---

## Этап 2: Перехват аудиопотока Google Meet
### 2.1. Подключение `AudioContext` и перехват WebRTC  
В `content.js`:
```markdown
- Подключи `AudioContext`.
- Найди активный WebRTC-аудиопоток.
- Добавь логирование для отладки, чтобы убедиться, что аудио поступает.
```

### 2.2. Запись аудио в `FileSystem API`  
Добавь в `content.js`:
```markdown
- `MediaRecorder` для записи аудио.
- Сохранение `.wav` в `FileSystem API`.
- Обработку паузы и остановки.
- Проверку, что файл успешно создаётся.
```

---

## Этап 3: Передача аудиофайла на сервер
### 3.1. Интеграция с Whisper API  
Добавь в `background.js`:
```markdown
- Функцию `sendToWhisper()`, которая отправляет `.wav` через `fetch`.
- Обработку ошибок и повторные попытки при сбое сети.
- Логирование успешной отправки.
```

### 3.2. Получение и сохранение транскрипции  
В `background.js`:
```markdown
- Добавь обработку JSON-ответа от Whisper API.
- Сохрани `.txt` в `FileSystem API`.
- Проверь, что файл скачивается автоматически.
```

---

## Этап 4: Интерфейс пользователя
### 4.1. Popup UI  
Создай `popup.html` с кнопками:
```markdown
- "Остановить запись"
- "Не записывать эту встречу"
В `popup.js` обработай нажатие кнопок.
```

### 4.2. Уведомления  
В `background.js`:
```markdown
- Добавь `chrome.notifications.create()`.
- Отправляй уведомления о старте, завершении и ошибках.
```

---

## Этап 5: Тестирование и отладка
### 5.1. Юнит-тесты  
Напиши тесты:
```markdown
- Проверка старта записи.
- Проверка сохранения `.wav`.
- Проверка успешной передачи файла.
```

### 5.2. Интеграционные тесты  
Проведи тестовые звонки:
```markdown
- Убедись, что запись стартует автоматически.
- Проверь корректность транскрипции.
- Отлови и исправь ошибки.
```
